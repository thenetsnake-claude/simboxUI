-- Create messages table
CREATE TABLE IF NOT EXISTS messages (
  id INT PRIMARY KEY AUTO_INCREMENT,
  smseagle_id INT UNIQUE NOT NULL,
  folder ENUM('inbox', 'outbox', 'sent', 'error', 'delivered') NOT NULL,
  phone_number VARCHAR(50) NOT NULL,
  text TEXT,
  text_binary TEXT,
  encoding VARCHAR(20),
  modem_no INT,
  sender_name VARCHAR(255),
  status VARCHAR(50),
  error_code INT,
  oid VARCHAR(255),
  validity VARCHAR(20),
  processed BOOLEAN DEFAULT FALSE,
  is_read BOOLEAN DEFAULT FALSE,
  insert_date TIMESTAMP,
  update_date TIMESTAMP,
  receive_date TIMESTAMP,
  delivery_date TIMESTAMP,
  sending_date TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_smseagle_id (smseagle_id),
  INDEX idx_folder (folder),
  INDEX idx_phone (phone_number),
  INDEX idx_modem (modem_no),
  INDEX idx_receive_date (receive_date),
  INDEX idx_sending_date (sending_date),
  INDEX idx_folder_phone (folder, phone_number),
  INDEX idx_is_read (is_read),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
